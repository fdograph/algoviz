{"ast":null,"code":"import _defineProperty from\"/Users/fernandosilva/projects/algoviz/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _toConsumableArray from\"/Users/fernandosilva/projects/algoviz/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/fernandosilva/projects/algoviz/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useCallback,useEffect,useLayoutEffect,useMemo,useState}from\"react\";import{buildRandomList}from\"../../logic/utils\";import Styles from\"./SortingAlgos.module.css\";import{AlgoType,getAlgo}from\"../../logic/algorithms\";import{Algorithm}from\"../Algorithm\";import{AlgoTypeSelector}from\"./AlgoTypeSelector\";import classNames from\"classnames\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var resetOnResize=function resetOnResize(setList,setRenderList){return function(){var list=buildRandomList(Math.ceil(window.innerWidth/10));setList(list);setRenderList(list);};};var SortingAlgos=function SortingAlgos(){var _useState=useState(AlgoType.BUBBLE_SORT),_useState2=_slicedToArray(_useState,2),algoType=_useState2[0],setAlgoType=_useState2[1];var _useState3=useState(buildRandomList(Math.ceil(window.innerWidth/10))),_useState4=_slicedToArray(_useState3,2),initialList=_useState4[0],setInitialList=_useState4[1];var _ref=[Math.min.apply(Math,_toConsumableArray(initialList)),Math.max.apply(Math,_toConsumableArray(initialList))],min=_ref[0],max=_ref[1];var _useState5=useState(initialList),_useState6=_slicedToArray(_useState5,2),renderList=_useState6[0],setRenderList=_useState6[1];var _useState7=useState(new Set()),_useState8=_slicedToArray(_useState7,2),selectedIdxs=_useState8[0],setSelectedIdxs=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isPLaying=_useState10[0],setIsPlaying=_useState10[1];var algo=useMemo(function(){return getAlgo(algoType,initialList,setRenderList,setSelectedIdxs);},[algoType,initialList]);var playPause=useCallback(function(){if(isPLaying){algo.pause();setIsPlaying(false);}else{algo.play(30).then(function(sorted){algo.pause();setIsPlaying(false);setRenderList(sorted);}).catch(function(){console.log(\"CANCELLED\");});setIsPlaying(true);}},[algo,isPLaying]);useEffect(function(){return function(){setIsPlaying(false);algo.pause();};},[algo]);useLayoutEffect(function(){var onResize=resetOnResize(setInitialList,setRenderList);window.addEventListener(\"resize\",onResize);return function(){window.removeEventListener(\"resize\",onResize);};},[]);return/*#__PURE__*/_jsxs(\"section\",{className:Styles.AlgorithmsWrapper,children:[/*#__PURE__*/_jsxs(\"div\",{className:Styles.AlgorithmsControls,children:[/*#__PURE__*/_jsx(\"div\",{className:Styles.AlgorithmsControlField,children:/*#__PURE__*/_jsx(AlgoTypeSelector,{selectedType:algoType,onChange:function onChange(t){return setAlgoType(t);}})}),/*#__PURE__*/_jsx(\"div\",{className:Styles.AlgorithmsControlField,children:/*#__PURE__*/_jsx(\"button\",{className:classNames(Styles.AlgorithmsControlBtn,_defineProperty({},Styles.isPlaying,isPLaying)),onClick:playPause,children:isPLaying?\"Stop\":\"Start\"})})]}),/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(Algorithm,{renderList:renderList,selected:selectedIdxs,max:max,min:min})})]});};export default SortingAlgos;","map":{"version":3,"sources":["/Users/fernandosilva/projects/algoviz/src/components/SortingAlgos/index.tsx"],"names":["React","useCallback","useEffect","useLayoutEffect","useMemo","useState","buildRandomList","Styles","AlgoType","getAlgo","Algorithm","AlgoTypeSelector","classNames","resetOnResize","setList","setRenderList","list","Math","ceil","window","innerWidth","SortingAlgos","BUBBLE_SORT","algoType","setAlgoType","initialList","setInitialList","min","max","renderList","Set","selectedIdxs","setSelectedIdxs","isPLaying","setIsPlaying","algo","playPause","pause","play","then","sorted","catch","console","log","onResize","addEventListener","removeEventListener","AlgorithmsWrapper","AlgorithmsControls","AlgorithmsControlField","t","AlgorithmsControlBtn","isPlaying"],"mappings":"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","sourcesContent":["import React, {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport { buildRandomList } from \"../../logic/utils\";\n\nimport Styles from \"./SortingAlgos.module.css\";\nimport { AlgoType, getAlgo } from \"../../logic/algorithms\";\nimport { Algorithm } from \"../Algorithm\";\nimport { AlgoTypeSelector } from \"./AlgoTypeSelector\";\nimport classNames from \"classnames\";\n\nconst resetOnResize = (\n  setList: (l: number[]) => void,\n  setRenderList: (l: number[]) => void\n) => {\n  return () => {\n    const list = buildRandomList(Math.ceil(window.innerWidth / 10));\n    setList(list);\n    setRenderList(list);\n  };\n};\n\nconst SortingAlgos: React.FC = () => {\n  const [algoType, setAlgoType] = useState<AlgoType>(AlgoType.BUBBLE_SORT);\n  const [initialList, setInitialList] = useState(\n    buildRandomList(Math.ceil(window.innerWidth / 10))\n  );\n  const [min, max] = [Math.min(...initialList), Math.max(...initialList)];\n  const [renderList, setRenderList] = useState<number[]>(initialList);\n  const [selectedIdxs, setSelectedIdxs] = useState<Set<number>>(new Set());\n  const [isPLaying, setIsPlaying] = useState<boolean>(false);\n  const algo = useMemo(\n    () => getAlgo(algoType, initialList, setRenderList, setSelectedIdxs),\n    [algoType, initialList]\n  );\n\n  const playPause = useCallback(() => {\n    if (isPLaying) {\n      algo.pause();\n      setIsPlaying(false);\n    } else {\n      algo\n        .play(30)\n        .then((sorted) => {\n          algo.pause();\n          setIsPlaying(false);\n          setRenderList(sorted);\n        })\n        .catch(() => {\n          console.log(\"CANCELLED\");\n        });\n      setIsPlaying(true);\n    }\n  }, [algo, isPLaying]);\n\n  useEffect(() => {\n    return () => {\n      setIsPlaying(false);\n      algo.pause();\n    };\n  }, [algo]);\n\n  useLayoutEffect(() => {\n    const onResize = resetOnResize(setInitialList, setRenderList);\n    window.addEventListener(\"resize\", onResize);\n    return () => {\n      window.removeEventListener(\"resize\", onResize);\n    };\n  }, []);\n\n  return (\n    <section className={Styles.AlgorithmsWrapper}>\n      <div className={Styles.AlgorithmsControls}>\n        <div className={Styles.AlgorithmsControlField}>\n          <AlgoTypeSelector\n            selectedType={algoType}\n            onChange={(t) => setAlgoType(t)}\n          />\n        </div>\n        <div className={Styles.AlgorithmsControlField}>\n          <button\n            className={classNames(Styles.AlgorithmsControlBtn, {\n              [Styles.isPlaying]: isPLaying,\n            })}\n            onClick={playPause}\n          >\n            {isPLaying ? \"Stop\" : \"Start\"}\n          </button>\n        </div>\n      </div>\n      <section>\n        <Algorithm\n          renderList={renderList}\n          selected={selectedIdxs}\n          max={max}\n          min={min}\n        />\n      </section>\n    </section>\n  );\n};\n\nexport default SortingAlgos;\n"]},"metadata":{},"sourceType":"module"}